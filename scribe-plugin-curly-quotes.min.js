define("constants",[],function(){return{openDoubleCurly:"“",closeDoubleCurly:"”",openSingleCurly:"‘",closeSingleCurly:"’"}}),define("formatters",["./constants"],function(e){function n(e){return/[^\s()]/.test(e)}function r(e,r){return function(t,i){i=i||"";var o=n(i);return o?i+r:i+e}}function t(n){if(/['"]/.test(n)){var i=n.replace(/([\s\S])?'/,r(e.openSingleCurly,e.closeSingleCurly)).replace(/([\s\S])?"/,r(e.openDoubleCurly,e.closeDoubleCurly));return t(i)}return n}return{convert:t}}),define("arrays",[],function(){function e(e){var n=[];if(e&&e.length&&e.item)for(var r=0;r<e.length;r++){var t=e.item(r);t&&n.push(t)}return n}return{toArray:e}}),define("scribe-plugin-curly-quotes",["./constants","./formatters","./arrays"],function(e,n,r){return function(){return function(e){function t(e){var r=document.createElement("div");return r.innerHTML=e,i(r,function(e,r){var t=(e+r).split(/(<[^>]+?>(?:.*<\/[^>]+?>)?)/);return t.map(function(e){return/^</.test(e)?e:n.convert(e)}).join("").slice(e.length)}),r.innerHTML}function i(e,n){var t=r.toArray(e.children).filter(u.isBlockElement);t.length?t.forEach(function(e){i(e,n)}):o(e,n)}function o(e,n){for(var r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT),t=r.firstChild(),i="";t;)t.previousSibling&&"BR"===t.previousSibling.nodeName&&(i=""),t.data=n(i,t.data),i+=t.data,t=r.nextSibling()}var l,u=e.node;e.el.addEventListener("keypress",function(e){var n={34:'"',39:"'"};l=n[e.charCode]}),e.el.addEventListener("input",function(){if(l){var n=new e.api.Selection,r=e.allowsBlockElements()?n.getContaining(u.isBlockElement):e.el;n.placeMarkers(),r.innerHTML=t(r.innerHTML),n.selectMarkers(),l=void 0}}),e.registerHTMLFormatter("normalize",t)}}});
//# sourceMappingURL=scribe-plugin-curly-quotes.min.js.map