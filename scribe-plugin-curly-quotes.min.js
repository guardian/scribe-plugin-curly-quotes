define("scribe-plugin-curly-quotes",[],function(){return function(){var e="“",n="”",r="‘",t="’";return function(i){function u(e){return/[^\s()]/.test(e)}function a(e){var n=document.createElement("div");return n.innerHTML=e,s(n,function(e){var n=e.split(/(<[^>]+?>(?:.*<\/[^>]+?>)?)/);return n.map(function(e){return/^</.test(e)?e:o(e)}).join("")}),n.innerHTML}function o(i){if(/['"]/.test(i)){var u=i.replace(/([\s\S])?'([\s\S])?/,c(r,t)).replace(/([\s\S])?"([\s\S])?/,c(e,n));return o(u)}return i}function c(e,n){return function(r,t,i){t=t||"",i=i||"";var a=!t,o=!i,c=u(t),s=u(i);return c||a&&!s&&!o?t+n+i:t+e+i}}function s(e,n){var r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT),t=r.firstChild();if(t)do t.data=n(t.data);while(t=r.nextSibling());return t}var f,l={34:'"',39:"'"};i.el.addEventListener("keypress",function(e){f=l[e.charCode]}),i.el.addEventListener("input",function(){if(f){var e=new i.api.Selection,n=e.getContaining(function(e){return"P"===e.nodeName});e.placeMarkers(),n.innerHTML=a(n.innerHTML),e.selectMarkers(),f=void 0}}),i.registerHTMLFormatter("normalize",a)}}});//# sourceMappingURL=scribe-plugin-curly-quotes.min.js.map